{"version":3,"file":"review-dashboard.element-ChrIna2L.js","sources":["../../../Client/src/api/core/ApiError.ts","../../../Client/src/api/core/CancelablePromise.ts","../../../Client/src/api/core/request.ts","../../../Client/src/api/services/ReviewResource.ts","../../../Client/src/dashboards/review-dashboard.element.ts"],"sourcesContent":["/* generated using openapi-typescript-codegen -- do not edit */\r\n/* istanbul ignore file */\r\n/* tslint:disable */\r\n/* eslint-disable */\r\nimport type { ApiRequestOptions } from './ApiRequestOptions';\r\nimport type { ApiResult } from './ApiResult';\r\n\r\nexport class ApiError extends Error {\r\n    public readonly url: string;\r\n    public readonly status: number;\r\n    public readonly statusText: string;\r\n    public readonly body: any;\r\n    public readonly request: ApiRequestOptions;\r\n\r\n    constructor(request: ApiRequestOptions, response: ApiResult, message: string) {\r\n        super(message);\r\n\r\n        this.name = 'ApiError';\r\n        this.url = response.url;\r\n        this.status = response.status;\r\n        this.statusText = response.statusText;\r\n        this.body = response.body;\r\n        this.request = request;\r\n    }\r\n}\r\n","/* generated using openapi-typescript-codegen -- do not edit */\r\n/* istanbul ignore file */\r\n/* tslint:disable */\r\n/* eslint-disable */\r\nexport class CancelError extends Error {\r\n\r\n    constructor(message: string) {\r\n        super(message);\r\n        this.name = 'CancelError';\r\n    }\r\n\r\n    public get isCancelled(): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport interface OnCancel {\r\n    readonly isResolved: boolean;\r\n    readonly isRejected: boolean;\r\n    readonly isCancelled: boolean;\r\n\r\n    (cancelHandler: () => void): void;\r\n}\r\n\r\nexport class CancelablePromise<T> implements Promise<T> {\r\n    #isResolved: boolean;\r\n    #isRejected: boolean;\r\n    #isCancelled: boolean;\r\n    readonly #cancelHandlers: (() => void)[];\r\n    readonly #promise: Promise<T>;\r\n    #resolve?: (value: T | PromiseLike<T>) => void;\r\n    #reject?: (reason?: any) => void;\r\n\r\n    constructor(\r\n        executor: (\r\n            resolve: (value: T | PromiseLike<T>) => void,\r\n            reject: (reason?: any) => void,\r\n            onCancel: OnCancel\r\n        ) => void\r\n    ) {\r\n        this.#isResolved = false;\r\n        this.#isRejected = false;\r\n        this.#isCancelled = false;\r\n        this.#cancelHandlers = [];\r\n        this.#promise = new Promise<T>((resolve, reject) => {\r\n            this.#resolve = resolve;\r\n            this.#reject = reject;\r\n\r\n            const onResolve = (value: T | PromiseLike<T>): void => {\r\n                if (this.#isResolved || this.#isRejected || this.#isCancelled) {\r\n                    return;\r\n                }\r\n                this.#isResolved = true;\r\n                if (this.#resolve) this.#resolve(value);\r\n            };\r\n\r\n            const onReject = (reason?: any): void => {\r\n                if (this.#isResolved || this.#isRejected || this.#isCancelled) {\r\n                    return;\r\n                }\r\n                this.#isRejected = true;\r\n                if (this.#reject) this.#reject(reason);\r\n            };\r\n\r\n            const onCancel = (cancelHandler: () => void): void => {\r\n                if (this.#isResolved || this.#isRejected || this.#isCancelled) {\r\n                    return;\r\n                }\r\n                this.#cancelHandlers.push(cancelHandler);\r\n            };\r\n\r\n            Object.defineProperty(onCancel, 'isResolved', {\r\n                get: (): boolean => this.#isResolved,\r\n            });\r\n\r\n            Object.defineProperty(onCancel, 'isRejected', {\r\n                get: (): boolean => this.#isRejected,\r\n            });\r\n\r\n            Object.defineProperty(onCancel, 'isCancelled', {\r\n                get: (): boolean => this.#isCancelled,\r\n            });\r\n\r\n            return executor(onResolve, onReject, onCancel as OnCancel);\r\n        });\r\n    }\r\n\r\n    get [Symbol.toStringTag]() {\r\n        return \"Cancellable Promise\";\r\n    }\r\n\r\n    public then<TResult1 = T, TResult2 = never>(\r\n        onFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | null,\r\n        onRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null\r\n    ): Promise<TResult1 | TResult2> {\r\n        return this.#promise.then(onFulfilled, onRejected);\r\n    }\r\n\r\n    public catch<TResult = never>(\r\n        onRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | null\r\n    ): Promise<T | TResult> {\r\n        return this.#promise.catch(onRejected);\r\n    }\r\n\r\n    public finally(onFinally?: (() => void) | null): Promise<T> {\r\n        return this.#promise.finally(onFinally);\r\n    }\r\n\r\n    public cancel(): void {\r\n        if (this.#isResolved || this.#isRejected || this.#isCancelled) {\r\n            return;\r\n        }\r\n        this.#isCancelled = true;\r\n        if (this.#cancelHandlers.length) {\r\n            try {\r\n                for (const cancelHandler of this.#cancelHandlers) {\r\n                    cancelHandler();\r\n                }\r\n            } catch (error) {\r\n                console.warn('Cancellation threw an error', error);\r\n                return;\r\n            }\r\n        }\r\n        this.#cancelHandlers.length = 0;\r\n        if (this.#reject) this.#reject(new CancelError('Request aborted'));\r\n    }\r\n\r\n    public get isCancelled(): boolean {\r\n        return this.#isCancelled;\r\n    }\r\n}\r\n","/* generated using openapi-typescript-codegen -- do not edit */\r\n/* istanbul ignore file */\r\n/* tslint:disable */\r\n/* eslint-disable */\r\nimport { ApiError } from './ApiError';\r\nimport type { ApiRequestOptions } from './ApiRequestOptions';\r\nimport type { ApiResult } from './ApiResult';\r\nimport { CancelablePromise } from './CancelablePromise';\r\nimport type { OnCancel } from './CancelablePromise';\r\nimport type { OpenAPIConfig } from './OpenAPI';\r\n\r\nexport const isDefined = <T>(value: T | null | undefined): value is Exclude<T, null | undefined> => {\r\n    return value !== undefined && value !== null;\r\n};\r\n\r\nexport const isString = (value: any): value is string => {\r\n    return typeof value === 'string';\r\n};\r\n\r\nexport const isStringWithValue = (value: any): value is string => {\r\n    return isString(value) && value !== '';\r\n};\r\n\r\nexport const isBlob = (value: any): value is Blob => {\r\n    return (\r\n        typeof value === 'object' &&\r\n        typeof value.type === 'string' &&\r\n        typeof value.stream === 'function' &&\r\n        typeof value.arrayBuffer === 'function' &&\r\n        typeof value.constructor === 'function' &&\r\n        typeof value.constructor.name === 'string' &&\r\n        /^(Blob|File)$/.test(value.constructor.name) &&\r\n        /^(Blob|File)$/.test(value[Symbol.toStringTag])\r\n    );\r\n};\r\n\r\nexport const isFormData = (value: any): value is FormData => {\r\n    return value instanceof FormData;\r\n};\r\n\r\nexport const base64 = (str: string): string => {\r\n    try {\r\n        return btoa(str);\r\n    } catch (err) {\r\n        // @ts-ignore\r\n        return Buffer.from(str).toString('base64');\r\n    }\r\n};\r\n\r\nexport const getQueryString = (params: Record<string, any>): string => {\r\n    const qs: string[] = [];\r\n\r\n    const append = (key: string, value: any) => {\r\n        qs.push(`${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`);\r\n    };\r\n\r\n    const process = (key: string, value: any) => {\r\n        if (isDefined(value)) {\r\n            if (Array.isArray(value)) {\r\n                value.forEach(v => {\r\n                    process(key, v);\r\n                });\r\n            } else if (typeof value === 'object') {\r\n                Object.entries(value).forEach(([k, v]) => {\r\n                    process(`${key}[${k}]`, v);\r\n                });\r\n            } else {\r\n                append(key, value);\r\n            }\r\n        }\r\n    };\r\n\r\n    Object.entries(params).forEach(([key, value]) => {\r\n        process(key, value);\r\n    });\r\n\r\n    if (qs.length > 0) {\r\n        return `?${qs.join('&')}`;\r\n    }\r\n\r\n    return '';\r\n};\r\n\r\nconst getUrl = (config: OpenAPIConfig, options: ApiRequestOptions): string => {\r\n    const encoder = config.ENCODE_PATH || encodeURI;\r\n\r\n    const path = options.url\r\n        .replace('{api-version}', config.VERSION)\r\n        .replace(/{(.*?)}/g, (substring: string, group: string) => {\r\n            if (options.path?.hasOwnProperty(group)) {\r\n                return encoder(String(options.path[group]));\r\n            }\r\n            return substring;\r\n        });\r\n\r\n    const url = `${config.BASE}${path}`;\r\n    if (options.query) {\r\n        return `${url}${getQueryString(options.query)}`;\r\n    }\r\n    return url;\r\n};\r\n\r\nexport const getFormData = (options: ApiRequestOptions): FormData | undefined => {\r\n    if (options.formData) {\r\n        const formData = new FormData();\r\n\r\n        const process = (key: string, value: any) => {\r\n            if (isString(value) || isBlob(value)) {\r\n                formData.append(key, value);\r\n            } else {\r\n                formData.append(key, JSON.stringify(value));\r\n            }\r\n        };\r\n\r\n        Object.entries(options.formData)\r\n            .filter(([_, value]) => isDefined(value))\r\n            .forEach(([key, value]) => {\r\n                if (Array.isArray(value)) {\r\n                    value.forEach(v => process(key, v));\r\n                } else {\r\n                    process(key, value);\r\n                }\r\n            });\r\n\r\n        return formData;\r\n    }\r\n    return undefined;\r\n};\r\n\r\ntype Resolver<T> = (options: ApiRequestOptions) => Promise<T>;\r\n\r\nexport const resolve = async <T>(options: ApiRequestOptions, resolver?: T | Resolver<T>): Promise<T | undefined> => {\r\n    if (typeof resolver === 'function') {\r\n        return (resolver as Resolver<T>)(options);\r\n    }\r\n    return resolver;\r\n};\r\n\r\nexport const getHeaders = async (config: OpenAPIConfig, options: ApiRequestOptions): Promise<Headers> => {\r\n    const [token, username, password, additionalHeaders] = await Promise.all([\r\n        resolve(options, config.TOKEN),\r\n        resolve(options, config.USERNAME),\r\n        resolve(options, config.PASSWORD),\r\n        resolve(options, config.HEADERS),\r\n    ]);\r\n\r\n    const headers = Object.entries({\r\n        Accept: 'application/json',\r\n        ...additionalHeaders,\r\n        ...options.headers,\r\n    })\r\n        .filter(([_, value]) => isDefined(value))\r\n        .reduce((headers, [key, value]) => ({\r\n            ...headers,\r\n            [key]: String(value),\r\n        }), {} as Record<string, string>);\r\n\r\n    if (isStringWithValue(token)) {\r\n        headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n\r\n    if (isStringWithValue(username) && isStringWithValue(password)) {\r\n        const credentials = base64(`${username}:${password}`);\r\n        headers['Authorization'] = `Basic ${credentials}`;\r\n    }\r\n\r\n    if (options.body !== undefined) {\r\n        if (options.mediaType) {\r\n            headers['Content-Type'] = options.mediaType;\r\n        } else if (isBlob(options.body)) {\r\n            headers['Content-Type'] = options.body.type || 'application/octet-stream';\r\n        } else if (isString(options.body)) {\r\n            headers['Content-Type'] = 'text/plain';\r\n        } else if (!isFormData(options.body)) {\r\n            headers['Content-Type'] = 'application/json';\r\n        }\r\n    }\r\n\r\n    return new Headers(headers);\r\n};\r\n\r\nexport const getRequestBody = (options: ApiRequestOptions): any => {\r\n    if (options.body !== undefined) {\r\n        if (options.mediaType?.includes('/json')) {\r\n            return JSON.stringify(options.body)\r\n        } else if (isString(options.body) || isBlob(options.body) || isFormData(options.body)) {\r\n            return options.body;\r\n        } else {\r\n            return JSON.stringify(options.body);\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\nexport const sendRequest = async (\r\n    config: OpenAPIConfig,\r\n    options: ApiRequestOptions,\r\n    url: string,\r\n    body: any,\r\n    formData: FormData | undefined,\r\n    headers: Headers,\r\n    onCancel: OnCancel\r\n): Promise<Response> => {\r\n    const controller = new AbortController();\r\n\r\n    const request: RequestInit = {\r\n        headers,\r\n        body: body ?? formData,\r\n        method: options.method,\r\n        signal: controller.signal,\r\n    };\r\n\r\n    if (config.WITH_CREDENTIALS) {\r\n        request.credentials = config.CREDENTIALS;\r\n    }\r\n\r\n    onCancel(() => controller.abort());\r\n\r\n    return await fetch(url, request);\r\n};\r\n\r\nexport const getResponseHeader = (response: Response, responseHeader?: string): string | undefined => {\r\n    if (responseHeader) {\r\n        const content = response.headers.get(responseHeader);\r\n        if (isString(content)) {\r\n            return content;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\nexport const getResponseBody = async (response: Response): Promise<any> => {\r\n    if (response.status !== 204) {\r\n        try {\r\n            const contentType = response.headers.get('Content-Type');\r\n            if (contentType) {\r\n                const jsonTypes = ['application/json', 'application/problem+json']\r\n                const isJSON = jsonTypes.some(type => contentType.toLowerCase().startsWith(type));\r\n                if (isJSON) {\r\n                    return await response.json();\r\n                } else {\r\n                    return await response.text();\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\nexport const catchErrorCodes = (options: ApiRequestOptions, result: ApiResult): void => {\r\n    const errors: Record<number, string> = {\r\n        400: 'Bad Request',\r\n        401: 'Unauthorized',\r\n        403: 'Forbidden',\r\n        404: 'Not Found',\r\n        500: 'Internal Server Error',\r\n        502: 'Bad Gateway',\r\n        503: 'Service Unavailable',\r\n        ...options.errors,\r\n    }\r\n\r\n    const error = errors[result.status];\r\n    if (error) {\r\n        throw new ApiError(options, result, error);\r\n    }\r\n\r\n    if (!result.ok) {\r\n        const errorStatus = result.status ?? 'unknown';\r\n        const errorStatusText = result.statusText ?? 'unknown';\r\n        const errorBody = (() => {\r\n            try {\r\n                return JSON.stringify(result.body, null, 2);\r\n            } catch (e) {\r\n                return undefined;\r\n            }\r\n        })();\r\n\r\n        throw new ApiError(options, result,\r\n            `Generic Error: status: ${errorStatus}; status text: ${errorStatusText}; body: ${errorBody}`\r\n        );\r\n    }\r\n};\r\n\r\n/**\r\n * Request method\r\n * @param config The OpenAPI configuration object\r\n * @param options The request options from the service\r\n * @returns CancelablePromise<T>\r\n * @throws ApiError\r\n */\r\nexport const request = <T>(config: OpenAPIConfig, options: ApiRequestOptions): CancelablePromise<T> => {\r\n    return new CancelablePromise(async (resolve, reject, onCancel) => {\r\n        try {\r\n            const url = getUrl(config, options);\r\n            const formData = getFormData(options);\r\n            const body = getRequestBody(options);\r\n            const headers = await getHeaders(config, options);\r\n\r\n            if (!onCancel.isCancelled) {\r\n                const response = await sendRequest(config, options, url, body, formData, headers, onCancel);\r\n                const responseBody = await getResponseBody(response);\r\n                const responseHeader = getResponseHeader(response, options.responseHeader);\r\n\r\n                const result: ApiResult = {\r\n                    url,\r\n                    ok: response.ok,\r\n                    status: response.status,\r\n                    statusText: response.statusText,\r\n                    body: responseHeader ?? responseBody,\r\n                };\r\n\r\n                catchErrorCodes(options, result);\r\n\r\n                resolve(result.body);\r\n            }\r\n        } catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n};\r\n","/* generated using openapi-typescript-codegen -- do not edit */\r\n/* istanbul ignore file */\r\n/* tslint:disable */\r\n/* eslint-disable */\r\nimport type { ReviewPage } from '../models/ReviewPage';\r\nimport type { CancelablePromise } from '../core/CancelablePromise';\r\nimport { OpenAPI } from '../core/OpenAPI';\r\nimport { request as __request } from '../core/request';\r\nexport class ReviewResource {\r\n    /**\r\n     * @returns any OK\r\n     * @throws ApiError\r\n     */\r\n    public static pages(): CancelablePromise<Array<ReviewPage>> {\r\n        return __request(OpenAPI, {\r\n            method: 'GET',\r\n            url: '/umbraco/review/api/v1/pages',\r\n            errors: {\r\n                401: `The resource is protected and requires an authentication token`,\r\n                403: `The authenticated user does not have access to this resource`,\r\n            },\r\n        });\r\n    }\r\n    /**\r\n     * @returns string OK\r\n     * @throws ApiError\r\n     */\r\n    public static ping(): CancelablePromise<string> {\r\n        return __request(OpenAPI, {\r\n            method: 'GET',\r\n            url: '/umbraco/review/api/v1/ping',\r\n            errors: {\r\n                401: `The resource is protected and requires an authentication token`,\r\n                403: `The authenticated user does not have access to this resource`,\r\n            },\r\n        });\r\n    }\r\n}\r\n","import { css, html, customElement, property, repeat } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { ReviewResource } from '../api/services/ReviewResource.ts'\r\nimport { ReviewPage } from '../api/index.ts';\r\n\r\n@customElement('protenacity-review-dashboard')\r\nexport class ProtenacityReviewDashboardElement extends UmbLitElement {\r\n\r\n    @property({ type: Boolean })\r\n    loading: Boolean;\r\n\r\n\r\n    @property({ type: Array<ReviewPage> })\r\n    pages?: ReviewPage[];\r\n\r\n    constructor() {\r\n        super();\r\n        this.loading = true;\r\n        ReviewResource.pages().then((pages) => {\r\n            this.pages = pages;\r\n            this.loading = false;\r\n        });\r\n    }\r\n\r\n    private dayOfWeek(date: string): string {\r\n        return new Intl.DateTimeFormat(navigator.language, { weekday: \"long\" }).format(new Date(date));\r\n    }\r\n\r\n    private dateHeader(daysLeft: number, date: string): string {\r\n        if (daysLeft < 0) {\r\n            return \"Overdue\";\r\n        }\r\n        if (daysLeft == 0) {\r\n            return \"Today\";\r\n        }\r\n        if (daysLeft == 1) {\r\n            return \"Tomorrow\";\r\n        }\r\n        if (daysLeft == 0) {\r\n            return \"Today\";\r\n        }\r\n        if (daysLeft < 7) {\r\n            return \"This \" + this.dayOfWeek(date);\r\n        }\r\n        if (daysLeft == 7) {\r\n            return \"One week\";\r\n        }\r\n        if (daysLeft < 14) {\r\n            return this.dayOfWeek(date) + \" week\";\r\n        }\r\n        if (daysLeft == 14) {\r\n            return \"Fortnight\";\r\n        }\r\n        if (daysLeft < 55) {\r\n            if (daysLeft % 7 == 0) {\r\n                return (daysLeft / 7) + \" weeks\"\r\n            } else {\r\n                return \"Less than \" + Math.ceil(daysLeft / 7) + \" weeks\";\r\n            }\r\n        }\r\n        if (daysLeft < 366) {\r\n            return \"Less than \" + Math.ceil(daysLeft / 30) + \" months\";\r\n        }\r\n        return \"Less than \" + Math.ceil(daysLeft / 365) + \" years\";\r\n    }\r\n\r\n    private dateText(daysLeft: number, date: string): string {\r\n        return daysLeft + \" days on the \" + (new Date(date)).toLocaleDateString();\r\n    }\r\n\r\n    override render() {\r\n\r\n        return html`\r\n            <p ?hidden=${!this.loading}>Loading...</p>\r\n            <uui-box ?hidden=${this.loading} headline=\"Review Content\">\r\n                <uui-table role=\"table\">\r\n                    <uui-table-head role=\"row\" style=\"background:#C0C0C0\">\r\n                        <uui-table-head-cell role=\"columnheader\">\r\n                            Review By\r\n                        </uui-table-head-cell>\r\n                        <uui-table-head-cell role=\"columnheader\">\r\n                            Page\r\n                        </uui-table-head-cell>\r\n                    </uui-table-head>\r\n                    ${repeat((this.pages as ReviewPage[]), (r) => r.key, (r) => html`\r\n                        <uui-table-row role=\"row\" style=\"background:${r.daysLeft < 0 ? \"#d98880\" : r.daysLeft < 7 ? \"#e6b0aa\" : r.daysLeft < 30 ? \"#edbb99\" : \"#a9dfbf\"}\">\r\n                            <uui-table-cell role=\"column\">\r\n                                <div>\r\n                                    <span>\r\n                                        ${this.dateHeader(r.daysLeft, r.reviewDate)}\r\n                                    </span>\r\n                                </div>\r\n                                <div>\r\n                                    <sub>\r\n                                        ${this.dateText(r.daysLeft, r.reviewDate)}\r\n                                    </sub>\r\n                                </div>\r\n                            </uui-table-cell>\r\n                            <uui-table-cell role=\"column\">\r\n                                <div>\r\n                                    <a href=\"${r.url}\">\r\n                                        ${r.name}\r\n                                    </a>\r\n                                </div>\r\n                                <div>\r\n                                    <sub>\r\n                                        ${repeat(r.path, (p, index) => p + index, (p, index) => html`\r\n                                            <span ?hidden=${index == 0}> -> </span>\r\n                                            <span>${p}</span>\r\n                                        `)}\r\n                                        <span> -> ${r.name}</span>\r\n                                    </sub>\r\n                                </div>\r\n                            </uui-table-cell>\r\n                        </uui-table-row>\r\n                    `)}\r\n                </uui-table>\r\n            </uui-box>\r\n        `;\r\n    }\r\n\r\n    static override readonly styles = [\r\n        css`\r\n      :host {\r\n        display: block;\r\n        padding: 24px;\r\n      }\r\n    `,\r\n    ];\r\n}\r\n\r\nexport default ProtenacityReviewDashboardElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'protenacity-review-dashboard': ProtenacityReviewDashboardElement;\r\n    }\r\n}\r\n"],"names":["ApiError","request","response","message","CancelError","CancelablePromise","executor","__privateAdd","_isResolved","_isRejected","_isCancelled","_cancelHandlers","_promise","_resolve","_reject","__privateSet","resolve","reject","onResolve","value","__privateGet","onReject","reason","onCancel","cancelHandler","onFulfilled","onRejected","onFinally","error","isDefined","isString","isStringWithValue","isBlob","isFormData","base64","str","getQueryString","params","qs","append","key","process","v","k","getUrl","config","options","encoder","path","substring","group","_a","url","getFormData","formData","_","resolver","getHeaders","token","username","password","additionalHeaders","headers","credentials","getRequestBody","sendRequest","body","controller","getResponseHeader","responseHeader","content","getResponseBody","contentType","type","catchErrorCodes","result","errorStatus","errorStatusText","errorBody","responseBody","ReviewResource","__request","OpenAPI","ProtenacityReviewDashboardElement","UmbLitElement","pages","date","daysLeft","html","repeat","r","p","index","css","__decorateClass","property","customElement","ProtenacityReviewDashboardElement$1"],"mappings":"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"}