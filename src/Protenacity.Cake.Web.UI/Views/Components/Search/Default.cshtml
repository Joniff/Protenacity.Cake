@model Protenacity.Cake.Web.Presentation.Editor.Search.SearchViewModel

<div class="w-100">
    <theme subtheme="Model.Subtheme" shade="Model.ThemeShade" border-color="@Model.BorderColor" border-edges="@Model.BorderEdges" class="w-100">

        <vc:paging render="@PageRenders.SearchBox" model="Model"></vc:paging>

        @if (Model.DidYouMean != null)
        {
            <div class="mb-5 mt-3">
                <span>
                    Did you mean: 
                </span>

                @foreach (var text in Model.DidYouMean.Select((text, index) => (index, text)))
                {
                    if (text.index > 0)
                    {
                        if (text.index == Model.DidYouMean.Count() - 1)
                        {
                            @Html.Raw(" or ")
                        }
                        else
                        {
                            @Html.Raw(", ")
                        }
                    }
                    @Html.Raw("<a href=\"?" + Model.QueryString + "=" + text.text + "\">" + text.text + "</a>")                
                }
            </div>
        }

        @if (Model.Criteria != null)
        {
            <div class="mb-3 mt-3">
                @if (Model.Results?.Any() == true)
                {
                    <h3>
                        Results @((Model.Page * Model.PageSize) + 1) @(Model.Results.Count() > 1 ? "to " + ((Model.Page * Model.PageSize) + Model.Results.Count()) : null) of @(Model.TotalResults)
                    </h3>

                    @foreach (var result in Model.Results)
                    {
                        <div class="mt-3">
                            <a href="@result.Url">
                                <h4>@Html.Raw(result.Headers[0])</h4>
                            </a>
                        </div>
                        <p>
                            @Html.Raw(result.Body)
                        </p>
                        <hr />
                    }

                    <vc:paging render="@PageRenders.Paging" model="Model"></vc:paging>
                }
                else
                {
                    <h3>
                        No Results
                    </h3>
                }
            </div>
        }

    </theme>
</div>
